(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{374:function(e,v,t){"use strict";t.r(v);var _=t(43),l=Object(_.a)({},(function(){var e=this,v=e.$createElement,t=e._self._c||v;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h3",{attrs:{id:"概念"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#概念"}},[e._v("#")]),e._v(" 概念")]),e._v(" "),t("ul",[t("li",[e._v("堆\n"),t("ul",[t("li",[e._v("释义: 利用 "),t("strong",[e._v("完全二叉树")]),e._v(" 维护的一组数据")]),e._v(" "),t("li",[e._v("性质: 线性数据结构, 相当于一维数据")])])]),e._v(" "),t("li",[e._v("栈\n"),t("ul",[t("li",[e._v("释义: 仅在 "),t("strong",[e._v("表尾")]),e._v(" 进行增加/删除操作的 "),t("em",[e._v("受限线性表")])]),e._v(" "),t("li",[e._v("性质: 先进后出(LIFO) - Last in first out")])])]),e._v(" "),t("li",[e._v("队列\n"),t("ul",[t("li",[e._v("释义: 仅在 "),t("strong",[e._v("表尾")]),e._v(" 删除操作, "),t("strong",[e._v("表头")]),e._v("增加的 "),t("em",[e._v("受限线性表")])]),e._v(" "),t("li",[e._v("性质: 先进先出(FIFO) - Frist in first out")])])]),e._v(" "),t("li",[e._v("EventLoop\n"),t("ul",[t("li",[e._v("MacroTask: 宏任务\n"),t("ul",[t("li",[e._v("script 全部代码")]),e._v(" "),t("li",[e._v("setTimeout/setInterval")]),e._v(" "),t("li",[e._v("setImmediate: 浏览器不支持(只有IE10支持, 见"),t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Window/setImmediate",target:"_blank",rel:"noopener noreferrer"}},[e._v("setImmeidate#MDN"),t("OutboundLink")],1),e._v(")")]),e._v(" "),t("li",[e._v("I/O")]),e._v(" "),t("li",[e._v("UI Rendering")])])]),e._v(" "),t("li",[e._v("MicroTask: 微任务\n"),t("ul",[t("li",[e._v("Promise")]),e._v(" "),t("li",[t("a",{attrs:{href:"https://nodejs.org/zh-cn/docs/guides/event-loop-timers-and-nexttick/#process-nexttick",target:"_blank",rel:"noopener noreferrer"}},[e._v("process.nextTick"),t("OutboundLink")],1),e._v(": NodeJS 独有")]),e._v(" "),t("li",[e._v("Object.observe: 废弃")]),e._v(" "),t("li",[t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/MutationObserver",target:"_blank",rel:"noopener noreferrer"}},[e._v("MutationObserve#mdn"),t("OutboundLink")],1)])])])])])]),e._v(" "),t("h3",{attrs:{id:"浏览器中的eventloop"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#浏览器中的eventloop"}},[e._v("#")]),e._v(" 浏览器中的EventLoop")]),e._v(" "),t("ul",[t("li",[e._v("JavaScript 线程\n"),t("ul",[t("li",[e._v("main thread: 主线程")]),e._v(" "),t("li",[e._v("call-stack: 调用栈\n"),t("ul",[t("li",[e._v("规则: "),t("strong",[e._v("后进先出")])]),e._v(" "),t("li",[e._v("所有任务都会被放到调用栈中, 等待主线程执行")])])])])]),e._v(" "),t("li",[e._v("单线程任务\n"),t("ul",[t("li",[e._v("同步任务: 在调用栈中按照顺序, 等待主线程依次执行")]),e._v(" "),t("li",[e._v("异步任务: 有结果返回、主线程空闲后，将注册的回调函数放入到 "),t("strong",[e._v("任务队列")]),e._v(" 中, 被读取到栈内, 等待主线程执行")])])]),e._v(" "),t("li",[e._v("任务队列\n"),t("ul",[t("li",[e._v("规则: "),t("strong",[e._v("先进先出")]),e._v(" 的数据结构")])])]),e._v(" "),t("li",[e._v("事件循环机制模型\n"),t("ul",[t("li",[e._v("选择当前要执行的任务队列\n"),t("ul",[t("li",[e._v("如果任务队列不为空\n"),t("ul",[t("li",[e._v("选择任务队列中最先进入的任务")]),e._v(" "),t("li",[e._v("将 "),t("strong",[e._v("事件循环")]),e._v(" 的任务设置为 "),t("em",[e._v("已选择任务")])]),e._v(" "),t("li",[e._v("执行任务")]),e._v(" "),t("li",[e._v("将 "),t("em",[e._v("事件循环")]),e._v(" 中的 "),t("strong",[e._v("当前运行任务")]),e._v(" 设置为 "),t("code",[e._v("null")])]),e._v(" "),t("li",[e._v("将 "),t("em",[e._v("运行完成的任务")]),e._v(" 从 "),t("em",[e._v("任务队列")]),e._v(" 中删除")])])]),e._v(" "),t("li",[e._v("如果任务队列为空\n"),t("ul",[t("li",[e._v("microtasks步骤: 进入 microtask 检查点")])])])])]),e._v(" "),t("li",[e._v("更新界面渲染")]),e._v(" "),t("li",[e._v("返回第一步")])])]),e._v(" "),t("li",[e._v("执行 microtask 检查点, 用户代理会执行以下步骤\n"),t("ul",[t("li",[e._v("设置 microtask 检查点为 "),t("code",[e._v("true")])]),e._v(" "),t("li",[e._v("当事件循环 microtask 不为空时\n"),t("ul",[t("li",[e._v("选择一个 "),t("strong",[e._v("最先进入")]),e._v(" "),t("em",[e._v("microtask 队列")]),e._v(" 中的 microtask")]),e._v(" "),t("li",[e._v("将事件循环中的 microtask 设置为 "),t("em",[e._v("选择的 microtask")])]),e._v(" "),t("li",[e._v("执行 microtask")]),e._v(" "),t("li",[e._v("将事件循环中的 microtask 设置为 "),t("code",[e._v("null")])]),e._v(" "),t("li",[e._v("删除 "),t("em",[e._v("microtask 队列")]),e._v(" 中 "),t("strong",[e._v("当前已执行")]),e._v(" 的 microtask")])])]),e._v(" "),t("li",[e._v("清理 "),t("em",[e._v("IndexDB")]),e._v(" 事务")]),e._v(" "),t("li",[e._v("将 microtask 检查点设置为 "),t("code",[e._v("false")])])])])]),e._v(" "),t("h3",{attrs:{id:"nodejs中的eventloop"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nodejs中的eventloop"}},[e._v("#")]),e._v(" NodeJS中的EventLoop")]),e._v(" "),t("ul",[t("li",[e._v("timers: 定时器\n"),t("ul",[t("li",[e._v("本阶段执行已经安排的 "),t("code",[e._v("setTimeout()")]),e._v(" 和 "),t("code",[e._v("setInterval()")]),e._v(" 的回调函数")])])]),e._v(" "),t("li",[e._v("pending callbacks: 待定回调\n"),t("ul",[t("li",[e._v("执行延迟到下一个循环迭代的 I/O 回调")])])]),e._v(" "),t("li",[e._v("idle, prepare:\n"),t("ul",[t("li",[e._v("仅系统内部使用")])])]),e._v(" "),t("li",[e._v("poll: 轮询\n"),t("ul",[t("li",[e._v("检索新的 I/O 事件; 执行 I/O 相关的回调, 其余情况 node 都将在此阻塞")])])]),e._v(" "),t("li",[e._v("check: 检测\n"),t("ul",[t("li",[t("code",[e._v("setImmediate()")]),e._v(" 回调函数在此执行")])])]),e._v(" "),t("li",[e._v("close callbacks: 关闭回调的函数\n"),t("ul",[t("li",[e._v("一些准备关闭的回调函数, 如 "),t("code",[e._v("socket.on('close', () => {})")]),e._v(" 或 "),t("code",[e._v("http.server.on('close, fn)")])])])])]),e._v(" "),t("h3",{attrs:{id:"参考资料"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[e._v("#")]),e._v(" 参考资料")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://juejin.im/post/5dc2635de51d452d6072f758",target:"_blank",rel:"noopener noreferrer"}},[e._v("做题学知识(3)之 Event Loop"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://juejin.im/post/5c3d8956e51d4511dc72c200",target:"_blank",rel:"noopener noreferrer"}},[e._v("一次弄懂Event Loop#光光同学"),t("OutboundLink")],1),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://www.cxymsg.com/guide/eventLoop.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("EventLoop"),t("OutboundLink")],1)])])]),e._v(" "),t("li",[t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/EventLoop",target:"_blank",rel:"noopener noreferrer"}},[e._v("EventLoop#mdn"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://nodejs.org/zh-cn/docs/guides/event-loop-timers-and-nexttick/",target:"_blank",rel:"noopener noreferrer"}},[e._v("nodejs#event-loop-timers-and-nexttick"),t("OutboundLink")],1)])])])}),[],!1,null,null,null);v.default=l.exports}}]);
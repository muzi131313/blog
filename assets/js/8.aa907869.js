(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{354:function(t,i,n){"use strict";n.r(i);var e=n(43),a=Object(e.a)({},(function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h2",{attrs:{id:"事件机制"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#事件机制"}},[t._v("#")]),t._v(" 事件机制")]),t._v(" "),n("h3",{attrs:{id:"概念"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#概念"}},[t._v("#")]),t._v(" 概念")]),t._v(" "),n("ul",[n("li",[t._v("通知冒泡: Widget 树从下层往上层传递事件的机制")])]),t._v(" "),n("h3",{attrs:{id:"系统事件监听与触发"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#系统事件监听与触发"}},[t._v("#")]),t._v(" 系统事件监听与触发")]),t._v(" "),n("ul",[n("li",[t._v("通知事件监听"),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('NotificationListener(\n    // 此处能够收到各种各样的事件\n    onNotification: (notify) {\n      switch (notify.runtimeType) {\n        case ScrollStartNotification:\n          print("ScrollStart");\n          break;\n      }\n    },\n    child: MyWidget(),\n)\n')])])])]),t._v(" "),n("li",[t._v("事件触发\n"),n("ul",[n("li",[t._v("系统自动触发\n"),n("ul",[n("li",[t._v("(Scrollable Widget) 滑动时，会分发 "),n("strong",[t._v("滚动通知")]),t._v(" (ScrollNotification)\n"),n("ul",[n("li",[t._v("Scrollbar 是根据 ScrollNotification 确定滚动条位置")])])])])])])])]),t._v(" "),n("h3",{attrs:{id:"自定义事件监听与触发"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#自定义事件监听与触发"}},[t._v("#")]),t._v(" 自定义事件监听与触发")]),t._v(" "),n("ul",[n("li",[t._v("自定义 Notification"),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("class MyNotification extends Notification {\n  MyNotification(this.msg);\n  final String msg;\n}\n")])])])]),t._v(" "),n("li",[t._v("监听与触发"),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('class NotificationRouteState extends State<NotificationRoute> {\n    String _msg="";\n    @override\n    Widget build(BuildContext context) {\n        //监听通知\n        return NotificationListener<MyNotification>(\n          onNotification: (notification) {\n            setState(() {\n              _msg+=notification.msg+"  ";\n            });\n           return true;\n          },\n          child: Center(\n            child: Column(\n              mainAxisSize: MainAxisSize.min,\n              children: <Widget>[\n                Builder(\n                  builder: (context) {\n                    return RaisedButton(\n                      // 按钮点击时分发通知\n                      // 节点的 context，需要使用 builder\n                      onPressed: () => MyNotification("Hi").dispatch(context),\n                      child: Text("Send Notification"),\n                    );\n                  },\n                ),\n                Text(_msg)\n              ],\n            ),\n          ),\n        );\n    }\n}\n')])])])])]),t._v(" "),n("h3",{attrs:{id:"notification-和-eventbus-的区别"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#notification-和-eventbus-的区别"}},[t._v("#")]),t._v(" Notification 和 EventBus 的区别")]),t._v(" "),n("ul",[n("li",[t._v("相同点\n"),n("ul",[n("li",[t._v("都可以发送通知")])])]),t._v(" "),n("li",[t._v("不同点\n"),n("ul",[n("li",[t._v("实现机制不一样\n"),n("ul",[n("li",[t._v("Notification 是包裹 widget，通过【事件冒泡机制原理】实现的")]),t._v(" "),n("li",[t._v("EventBus 是通过 【观察者设计模式】实现的")])])]),t._v(" "),n("li",[t._v("耦合程度不一样\n"),n("ul",[n("li",[t._v("Notification 是和 builder 耦合到一块")]),t._v(" "),n("li",[t._v("EventBus 则无耦合")])])])])])]),t._v(" "),n("h2",{attrs:{id:"参考资料"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[t._v("#")]),t._v(" 参考资料")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://juejin.im/post/5cb46a75e51d456e586640b9",target:"_blank",rel:"noopener noreferrer"}},[t._v('天呐！你竟然不知道Flutter中的"通知冒泡" | juejin'),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://book.flutterchina.club/chapter8/notification.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("8.4 通知(Notification) | 《Flutter实战》"),n("OutboundLink")],1)])])])}),[],!1,null,null,null);i.default=a.exports}}]);
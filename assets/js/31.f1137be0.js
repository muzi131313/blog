(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{377:function(t,s,a){"use strict";a.r(s);var n=a(43),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h3",{attrs:{id:"javascript-中变量在内存中存储的形式是什么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#javascript-中变量在内存中存储的形式是什么"}},[t._v("#")]),t._v(" "),a("code",[t._v("JavaScript")]),t._v("  中变量在内存中存储的形式是什么?")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("JavaScript")]),t._v(" 分为栈内存和堆内存\n"),a("ul",[a("li",[t._v("栈内存的特点\n"),a("ul",[a("li",[t._v("存储值的大小固定")]),t._v(" "),a("li",[t._v("内存小")]),t._v(" "),a("li",[t._v("由系统自动分配内存空间")]),t._v(" "),a("li",[t._v("可以直接操作其保存的变量, 运行效率高")])])]),t._v(" "),a("li",[t._v("堆内存的特点\n"),a("ul",[a("li",[t._v("存储值大小不固定, 可动态调整")]),t._v(" "),a("li",[t._v("内存大")]),t._v(" "),a("li",[t._v("通过代码分配内存空间")]),t._v(" "),a("li",[t._v("不能直接操作其内部存储, 使用引用地址读取")])])])])]),t._v(" "),a("li",[t._v("JavaScript 变量存储形式是什么?\n"),a("ul",[a("li",[t._v("基础类型存储在栈中")]),t._v(" "),a("li",[t._v("引用类型存储在堆中")])])]),t._v(" "),a("li",[t._v("堆栈的数据结构是什么?\n"),a("ul",[a("li",[t._v("栈是 "),a("code",[t._v("LIFO")]),t._v("(后进先出)")]),t._v(" "),a("li",[t._v("堆是 "),a("code",[t._v("FIFO")]),t._v("(先进先出)")])])]),t._v(" "),a("li",[t._v("引用访问是什么？\n"),a("ul",[a("li",[t._v("从栈中找出引用数据类型的地址")]),t._v(" "),a("li",[t._v("然后根据地址, 找到堆中引用数据的值，这种访问叫 "),a("em",[t._v("引用访问")])])])]),t._v(" "),a("li",[t._v("JavaScript 的内存生命周期是什么?\n"),a("ul",[a("li",[t._v("分配内存")]),t._v(" "),a("li",[t._v("使用内存(读/写)")]),t._v(" "),a("li",[t._v("不需要时, 释放内存")])])]),t._v(" "),a("li",[t._v("所有的基础数据类型都是存放在栈中的么?\n"),a("ul",[a("li",[t._v("如果基础数据类型是被放在闭包中, 那么就会放在堆中")])])])]),t._v(" "),a("h3",{attrs:{id:"垃圾回收"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#垃圾回收"}},[t._v("#")]),t._v(" 垃圾回收")]),t._v(" "),a("ul",[a("li",[t._v("垃圾回收(garbage collecation)的方法有哪些？\n"),a("ul",[a("li",[t._v("标记清除("),a("strong",[t._v("javascript中常用的清除方式")]),t._v(")\n"),a("ul",[a("li",[t._v("当变量离开执行环境, 就会被 "),a("em",[t._v("垃圾收集器")]),t._v(" 标记为 "),a("em",[t._v('"离开环境"')])])])]),t._v(" "),a("li",[t._v("引用计数("),a("em",[t._v("现代浏览器不再使用")]),t._v(")\n"),a("ul",[a("li",[a("p",[t._v("语言引擎有一张表, 保存内存中所有资源("),a("em",[t._v("通常是各种值")]),t._v(")的引用次数, 引用次数为 "),a("code",[t._v("0")]),t._v(" 的变量会被回收")])]),t._v(" "),a("li",[a("details",[a("summary",[t._v("正常引用回收举例")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// [1, 2, 3] 不再需要, 引用计数为0, 会被回收掉")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" array "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" array "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])])])]),t._v(" "),a("li",[a("details",[a("summary",[t._v("引用计数最大问题: 循环引用")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("func")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" b "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("b "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" b "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// b 的引用次数不为 0, 无法被回收")]),t._v("\n    b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("a "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" a "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// a 的引用次数不为 0, 无法被回收")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("func")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])]),t._v(" "),a("li",[a("p",[t._v("历史")]),t._v(" "),a("ul",[a("li",[a("details",[a("summary",[t._v("IE9 之前循环引用示例")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// dom#id 和 click 相互引用, 导致了循环引用")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHandler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// dom#id 通过onclick事件保持了对click函数的引用")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ele "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'id'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// click函数通过外部的词法环境引用了dom+id这个对象, 能访问到")]),t._v("\n    ele"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onclick")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("click")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])]),t._v(" "),a("li",[a("p",[t._v("Firefox 低版本(Firefox3.0), 使用XPCOM, 基于引用技术策略")])]),t._v(" "),a("li",[a("p",[t._v("IE9 之前, 部分对象不是原生 JavaScript 对象")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("DOM")]),t._v("/"),a("code",[t._v("BOM")]),t._v(" 使用 c++ 的组合模型对象("),a("code",[t._v("COM")]),t._v(")")]),t._v(" "),a("li",[t._v("IE8 采用 "),a("em",[t._v("标记清除策略")]),t._v(", c++ 使用 "),a("em",[t._v("引用计数")])]),t._v(" "),a("li",[t._v("IE6~IE7 使用 "),a("em",[t._v("引用计数")]),t._v(" 策略\n"),a("ul",[a("li",[a("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Memory_Management",target:"_blank",rel:"noopener noreferrer"}},[t._v("Memory_Management#mdn"),a("OutboundLink")],1)])])])])]),t._v(" "),a("li",[a("p",[t._v("IE9 之后, "),a("code",[t._v("DOM")]),t._v("/"),a("code",[t._v("BOM")]),t._v(" 转换成了真正的 JavaScript 对象")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/zhansingsong/js-leakage-patterns/blob/master/IE%3C8%E5%BE%AA%E7%8E%AF%E5%BC%95%E7%94%A8%E5%AF%BC%E8%87%B4%E7%9A%84%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2/IE%3C8%E5%BE%AA%E7%8E%AF%E5%BC%95%E7%94%A8%E5%AF%BC%E8%87%B4%E7%9A%84%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("IE<8循环引用导致的内存泄露#zhansingsong"),a("OutboundLink")],1)])])])])])])])])]),t._v(" "),a("li",[t._v("垃圾回收机制什么?\n"),a("ul",[a("li",[t._v("分代回收机制\n"),a("ul",[a("li",[t._v("来源: "),a("strong",[t._v("世代假说")]),t._v(" "),a("ul",[a("li",[t._v("新生的倾向于死亡")]),t._v(" "),a("li",[t._v("不死的对象, 会活的更久")])])])])])])]),t._v(" "),a("li",[t._v("V8 的内存分代\n"),a("ul",[a("li",[t._v("新生代: 对象存活时间较短。只经历过一次垃圾回收")]),t._v(" "),a("li",[t._v("老生代: 对象存活时间较长。经历过一次或多次垃圾回收\n"),a("ul",[a("li",[t._v("特点\n"),a("ul",[a("li",[t._v("存活对象多")]),t._v(" "),a("li",[t._v("存活时间长")])])])])])])]),t._v(" "),a("li",[t._v("全停顿\n"),a("ul",[a("li",[t._v("垃圾回收执行前, 需要将逻辑暂停, 等垃圾回收执行后, 再继续执行应用逻辑, 这种行为称为 "),a("strong",[t._v("全停顿")])]),t._v(" "),a("li",[t._v("原因: 避免应用逻辑和垃圾回收期看到的不一样")])])]),t._v(" "),a("li",[t._v("Scavenge 算法\n"),a("ul",[a("li",[t._v("主要依靠 Cheney 算法实现")])])]),t._v(" "),a("li",[t._v("Cheney 算法\n"),a("ul",[a("li",[t._v("释义\n"),a("ul",[a("li",[t._v("垃圾回收方式: 复制")]),t._v(" "),a("li",[t._v("做法: 将堆空间一分为二, 每一块成为 semispace")]),t._v(" "),a("li",[t._v("FROM 空间: 使用中的 semispace")]),t._v(" "),a("li",[t._v("TO 空间: 闲置的 semispace")])])]),t._v(" "),a("li",[t._v("过程\n"),a("ul",[a("li",[t._v("从 From 空间分配内存, 如果内存分配完毕, 则执行 Scavenge 算法, 进行垃圾回收")]),t._v(" "),a("li",[t._v("检查 From 空间的存活对象\n"),a("ul",[a("li",[t._v("若对象存活, 则检查是否符合对象晋升, 符合的话, 晋升到老生代, 否则将对象从 From 空间拷贝到 To 空间")]),t._v(" "),a("li",[t._v("若对象不存活的话, 则释放不存活对象的空间")])])]),t._v(" "),a("li",[t._v("检查完毕, 则进行 From 空间和 To 空间进行角色反转(flip)")])])]),t._v(" "),a("li",[t._v("对象晋升\n"),a("ul",[a("li",[t._v("对象是否经历过 Scavenge 回收\n"),a("ul",[a("li",[t._v("经历过的话, 直接放到老生代")]),t._v(" "),a("li",[t._v("没有经历过的话, 复制到 To 空间")])])]),t._v(" "),a("li",[t._v("检测 To 空间占比是否超过限制\n"),a("ul",[a("li",[t._v("超过 25% 的话, 直接晋升到老生代\n"),a("ul",[a("li",[t._v("设置 25% 的原因, 是因为完成 scavenge 回收后, 要进行 semispace 反转, From 空间转换成 To 空间")])])])])])])])])]),t._v(" "),a("li",[t._v("Mark-Sweep: 标记-清除\n"),a("ul",[a("li",[t._v("遍历堆中的所有对象, 标记所有的存活对象")]),t._v(" "),a("li",[t._v("清理没有标记的对象")])])]),t._v(" "),a("li",[t._v("Mark-Compact: 标记-整理\n"),a("ul",[a("li",[t._v("把堆中所有对象, 移动到另外一边")]),t._v(" "),a("li",[t._v("然后清理在边界外的对象")])])]),t._v(" "),a("li",[t._v("Mark-Sweep 和 Mark-Compact 的比较\n"),a("ul",[a("li",[t._v("Mark-Sweep 因为不移动对象, 所以清理后的空间是不连续的\n"),a("ul",[a("li",[t._v("弊端: 分配一个较大的对象, 如果没有单个内存空间能承载住, 将会触发一次垃圾回收("),a("em",[t._v("没有必要")]),t._v(")")])])]),t._v(" "),a("li",[t._v("Mark-Compact 因为要移动对象, 所以效率较低, 一般在内存不够的时候使用")])])]),t._v(" "),a("li",[t._v("Incremental Marking(增量标记)\n"),a("ul",[a("li",[t._v("V8 将一次停顿的标记过程, 分成很多小段, 执行一会标记, 就让程序逻辑执行一会, 交替多次后完成标记\n"),a("ul",[a("li",[t._v("原因: 老生代中存活对象多, 垃圾回收时间长, 全停顿影响较大")])])])])]),t._v(" "),a("li",[t._v("lazy sweeping(延迟清理)\n"),a("ul",[a("li",[t._v("发生在增量标记后")]),t._v(" "),a("li",[t._v("确切知道多少空间被释放")]),t._v(" "),a("li",[t._v("延迟清理被允许, 页面清理可以根据实际需要进行")]),t._v(" "),a("li",[t._v("延迟清理之后, 增量标记将重新开始")])])])]),t._v(" "),a("h3",{attrs:{id:"内存泄露"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#内存泄露"}},[t._v("#")]),t._v(" 内存泄露")]),t._v(" "),a("ul",[a("li",[t._v("意外的全局变量\n"),a("ul",[a("li",[a("details",[a("summary",[t._v("举例")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    bar "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"this is a hidden global variable"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// or")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("variable "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"potential accidental global"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])]),t._v(" "),a("li",[a("p",[t._v("解决方法: 使用 "),a("code",[t._v("use strict")]),t._v(" 启用 JavaScript 严格模式")])])])]),t._v(" "),a("li",[t._v("被遗忘的定时器/回调函数\n"),a("ul",[a("li",[a("details",[a("summary",[t._v("举例")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" someResource "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setInterval")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" node "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'node'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 处理 node 和 someResource")]),t._v("\n        node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHTML "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("someResource"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndocument"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'node'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 节点被删除, 但是定时器保持这对someResource的引用, 定时器和someResource不会被销毁")]),t._v("\n")])])])])])])]),t._v(" "),a("li",[t._v("闭包\n"),a("ul",[a("li",[a("p",[t._v("内部函数引用外部函数, 形成的闭包")])]),t._v(" "),a("li",[a("details",[a("summary",[t._v("闭包举例")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bindEvent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" obj "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'id'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  obj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onclick")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])]),t._v(" "),a("li",[a("details",[a("summary",[t._v("解决举例")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1.将事件处理函数定义在外面")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onclickHandler")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bindEvent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" obj "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'id'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  obj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("onclick "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" onclickHandler\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2.或者在定义事件处理函数的外部函数中，删除对dom的引用")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bindEvent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" obj "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'id'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  obj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onclick")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Even if it is a empty function")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  obj "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])])])]),t._v(" "),a("li",[t._v("删除了 DOM, 却没有清理对 DOM 元素的引用变量\n"),a("ul",[a("li",[a("details",[a("summary",[t._v("举例")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" button "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'button'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// DOM 元素被删除, 但是 button 变量对 DOM 元素仍有引用, 不能被 GC 回收")]),t._v("\ndocument"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeChild")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'button'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 解决方法: 删除DOM时, 同时清理引用DOM")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// button = null")]),t._v("\n")])])])])])])])]),t._v(" "),a("h3",{attrs:{id:"内存泄露的识别与避免"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#内存泄露的识别与避免"}},[t._v("#")]),t._v(" 内存泄露的识别与避免")]),t._v(" "),a("ul",[a("li",[t._v("浏览器中识别\n"),a("ul",[a("li",[t._v("方法\n"),a("ul",[a("li",[t._v("打开 Chrome 的 Performance")]),t._v(" "),a("li",[t._v("勾选 Screenshots 和 Memory")]),t._v(" "),a("li",[t._v("左上角小圆点开始录制")]),t._v(" "),a("li",[t._v("停止录制")])])]),t._v(" "),a("li",[t._v("如果内存使用稳定, 则不存在内存泄露; 反之, 则存在")])])]),t._v(" "),a("li",[t._v("Node 中识别\n"),a("ul",[a("li",[t._v("方法\n"),a("ul",[a("li",[a("a",{attrs:{href:"https://nodejs.org/api/process.html#process_process_memoryusage",target:"_blank",rel:"noopener noreferrer"}},[t._v("process.memoryUsage"),a("OutboundLink")],1),t._v(" "),a("ul",[a("li",[t._v("rss（resident set size）：所有内存占用，包括指令区和堆栈。")]),t._v(" "),a("li",[t._v('heapTotal："堆"占用的内存，包括用到的和没用到的。')]),t._v(" "),a("li",[t._v("heapUsed：用到的堆的部分。")]),t._v(" "),a("li",[t._v("external： V8 引擎内部的 C++ 对象占用的内存。")])])]),t._v(" "),a("li",[a("code",[t._v("node --expose-gc")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("--expose-gc")]),t._v(": 允许手动调用 "),a("code",[t._v("gc")]),t._v(" 回收 "),a("code",[t._v("global.gc()")])]),t._v(" "),a("li",[a("code",[t._v("WeakMap")]),t._v(": 弱引用")])])])])])])]),t._v(" "),a("li",[t._v("避免\n"),a("ul",[a("li",[t._v("方法\n"),a("ul",[a("li",[t._v("减少全局变量、或者生命周期长的对象, 对无用的数据进行垃圾回收")]),t._v(" "),a("li",[t._v("注意程序逻辑, 避免“死循环”")]),t._v(" "),a("li",[t._v("避免创建对象\n"),a("ul",[a("li",[a("details",[a("summary",[t._v("函数返回一个函数的示例")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("func")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])])])])])]),t._v(" "),a("li",[t._v("准则: 及时清理不用的变量")])])])]),t._v(" "),a("h3",{attrs:{id:"垃圾回收场景优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#垃圾回收场景优化"}},[t._v("#")]),t._v(" 垃圾回收场景优化")]),t._v(" "),a("ul",[a("li",[t._v("数组复用: 一个数组变量尽可能的重用, 删除数组时使用 "),a("code",[t._v("array.length = 0")]),t._v(" "),a("ul",[a("li",[a("details",[a("summary",[t._v("数组复用")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" arr "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'浪里行舟'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\narr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 可以直接让数字清空，而且数组类型不变。")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// arr = []; 虽然让a变量成一个空数组,但是在堆上重新申请了一个空数组对象。")]),t._v("\n")])])])])])])]),t._v(" "),a("li",[t._v("对象复用: 尤其在循环的地方, 能复用就复用, 不用的时候设置为 "),a("code",[t._v("null")]),t._v(" "),a("ul",[a("li",[a("details",[a("summary",[t._v("对象复用")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" t "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 每次循环都会创建一个新对象。")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// var t = {};// 每次循环都会创建一个新对象。")]),t._v("\n  t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("age "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v("\n  t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'123'")]),t._v("\n  t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("index "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" i\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nt "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//对象如果已经不用了，那就立即设置为null；等待垃圾回收。")]),t._v("\n")])])])])])])]),t._v(" "),a("li",[t._v("循环中的函数表达式: 最好放到外面, 不用的时候设置为 "),a("code",[t._v("null")]),t._v(" "),a("ul",[a("li",[a("details",[a("summary",[t._v("函数放到循环外(推荐)")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 推荐用法")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("t")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("a")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" k "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" k "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" k"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("t")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("k"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nt "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n\n")])])])])]),t._v(" "),a("li",[a("details",[a("summary",[t._v("函数放到循环中(不推荐)")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在循环中最好也别使用函数表达式。")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" k "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" k "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" k"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("t")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("a")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 创建了10次  函数对象。")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("t")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("k"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])])])])]),t._v(" "),a("h3",{attrs:{id:"参考资料"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[t._v("#")]),t._v(" 参考资料")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://juejin.im/post/5cb33660e51d456e811d2687",target:"_blank",rel:"noopener noreferrer"}},[t._v("JavaScript中的垃圾回收和内存泄漏"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.cxymsg.com/guide/memory.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("JavaScript内存管理"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=e.exports}}]);